<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Coding Schemes • faux</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Coding Schemes">
<meta property="og:description" content="faux">
<meta property="og:image" content="https://debruine.github.io/faux/reference/figures/card.png">
<meta property="og:image:alt" content="Blue hexagon with the word FAUX in white">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@lisadebruine">
<meta name="twitter:site" content="@lisadebruine">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">faux</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">1.0.0.9002</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/sim_design.html">Simulate by Design</a>
    </li>
    <li>
      <a href="../articles/rnorm_multi.html">Simulate Correlated Variables</a>
    </li>
    <li>
      <a href="../articles/sim_df.html">Simulate from Existing Data</a>
    </li>
    <li>
      <a href="../articles/continuous.html">Continuous Predictors</a>
    </li>
    <li>
      <a href="../articles/plots.html">Plotting</a>
    </li>
    <li>
      <a href="../articles/sim_mixed.html">Mixed Design Simulation</a>
    </li>
    <li>
      <a href="../articles/distributions.html">Distribution Conversions</a>
    </li>
    <li>
      <a href="../articles/codebook.html">Codebook Demo</a>
    </li>
    <li>
      <a href="../articles/coding.html">Coding Schemes</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/debruine/faux/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="coding_files/header-attrs-2.9.4/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Coding Schemes</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/debruine/faux/blob/master/vignettes/coding.Rmd"><code>vignettes/coding.Rmd</code></a></small>
      <div class="hidden name"><code>coding.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/debruine/faux">faux</a></span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ************</span>
<span class="co">#&gt; Welcome to faux. For support and examples visit:</span>
<span class="co">#&gt; https://debruine.github.io/faux/</span>
<span class="co">#&gt; - Get and set global package options with: faux_options()</span>
<span class="co">#&gt; ************</span></code></pre></div>
<p>Marissa Barlaz has a really great explainer for <a href="https://marissabarlaz.github.io/portfolio/contrastcoding/">contrasts in R</a>, which inspired the contrast functions in faux.</p>
<p>First, we’ll set up a simple experimental design and analyse it with <code><a href="https://rdrr.io/r/stats/lm.html">lm()</a></code>. Notice that the default contrast is treatment coding, with cat as the baseline condition.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_design.html">sim_design</a></span><span class="op">(</span>between <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>pet <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"cat"</span>, <span class="st">"dog"</span><span class="op">)</span><span class="op">)</span>, 
                 mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="coding_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">pet</span>, <span class="va">df</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/stats/contrasts.html">contrasts</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span><span class="op">)</span>
<span class="co">#&gt;     dog</span>
<span class="co">#&gt; cat   0</span>
<span class="co">#&gt; dog   1</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">0.995</td>
<td align="right">0.101</td>
<td align="right">9.89</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">petdog</td>
<td align="right">0.877</td>
<td align="right">0.142</td>
<td align="right">6.17</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<div id="contrast-coding" class="section level2">
<h2 class="hasAnchor">
<a href="#contrast-coding" class="anchor"></a>Contrast Coding</h2>
<p>Contrast coding sets the grand mean as the intercept. Each contrast compares one level with a reference level.</p>
<p>Use the function <code><a href="../reference/contrast_code.html">contrast_code()</a></code> to recode the <code>pet</code> factor using contrast coding. The reference level defaults to the first level. Notice how the intercept changes. It is now estimating the overall mean instead of the baseline group mean.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span><span class="op">$</span><span class="va">pet</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/contrast_code.html">contrast_code</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span><span class="op">)</span>
<span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">pet</span>, <span class="va">df</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/stats/contrasts.html">contrasts</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span><span class="op">)</span>
<span class="co">#&gt;     _dog.vs.cat</span>
<span class="co">#&gt; cat        -0.5</span>
<span class="co">#&gt; dog         0.5</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">1.434</td>
<td align="right">0.071</td>
<td align="right">20.16</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">pet_dog.vs.cat</td>
<td align="right">0.877</td>
<td align="right">0.142</td>
<td align="right">6.17</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>Set <code>base = "dog"</code> to change the comparison group. Notice how the sign of the main effect changes.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span><span class="op">$</span><span class="va">pet</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/contrast_code.html">contrast_code</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span>, base <span class="op">=</span> <span class="st">"dog"</span><span class="op">)</span>
<span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">pet</span>, <span class="va">df</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/stats/contrasts.html">contrasts</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span><span class="op">)</span>
<span class="co">#&gt;     _cat.vs.dog</span>
<span class="co">#&gt; cat         0.5</span>
<span class="co">#&gt; dog        -0.5</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">1.434</td>
<td align="right">0.071</td>
<td align="right">20.16</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">pet_cat.vs.dog</td>
<td align="right">-0.877</td>
<td align="right">0.142</td>
<td align="right">-6.17</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>Let’s try it with a three-level factor. I set <code>empirical = TRUE</code> to make interpreting the estimates easier. In all the subsequent examples, try putting into words what the estimates for the intercept and terms mean in relation to the mean values for each group in the data.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_design.html">sim_design</a></span><span class="op">(</span>between <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>pet <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"cat"</span>, <span class="st">"dog"</span>, <span class="st">"ferret"</span><span class="op">)</span><span class="op">)</span>, 
                 n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">100</span>, <span class="fl">200</span><span class="op">)</span>, mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">9</span><span class="op">)</span>, empirical <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="coding_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>Default treatment coding. The estimate for the intercept is the mean value for cats (<span class="math inline">\(2\)</span>), while the term <code>petdog</code> is the mean value for dogs minus cats (<span class="math inline">\(4 - 2\)</span>), and the term <code>petferret</code> is the mean value for ferrets minus cats (<span class="math inline">\(9 - 2\)</span>).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">pet</span>, <span class="va">df</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/stats/contrasts.html">contrasts</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span><span class="op">)</span>
<span class="co">#&gt;        dog ferret</span>
<span class="co">#&gt; cat      0      0</span>
<span class="co">#&gt; dog      1      0</span>
<span class="co">#&gt; ferret   0      1</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">2</td>
<td align="right">0.141</td>
<td align="right">14.1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">petdog</td>
<td align="right">2</td>
<td align="right">0.173</td>
<td align="right">11.5</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">petferret</td>
<td align="right">7</td>
<td align="right">0.158</td>
<td align="right">44.3</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>Contrast coding with the first level (“cat”) as the default base. Now the intercept is the grand mean, which is the mean of the three group means (<span class="math inline">\((2 + 4 + 9)/3\)</span>). Notice that this is different from the mean value of y in our dataset (6.571, since the number of pets in each group is unbalanced. The term <code>pet_dog.vs.cat</code> is the mean value for dogs minus cats (<span class="math inline">\(4 - 2\)</span>) and the term <code>pet_ferret.vs.cat</code> is the mean value for ferrets minus cats (<span class="math inline">\(9 - 2\)</span>).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span><span class="op">$</span><span class="va">pet</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/contrast_code.html">contrast_code</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span><span class="op">)</span>
<span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">pet</span>, <span class="va">df</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/stats/contrasts.html">contrasts</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span><span class="op">)</span>
<span class="co">#&gt;        _dog.vs.cat _ferret.vs.cat</span>
<span class="co">#&gt; cat         -0.333         -0.333</span>
<span class="co">#&gt; dog          0.667         -0.333</span>
<span class="co">#&gt; ferret      -0.333          0.667</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">5</td>
<td align="right">0.062</td>
<td align="right">80.2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">pet_dog.vs.cat</td>
<td align="right">2</td>
<td align="right">0.173</td>
<td align="right">11.5</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">pet_ferret.vs.cat</td>
<td align="right">7</td>
<td align="right">0.158</td>
<td align="right">44.3</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>Contrast coding with “dog” as the base. How does the interpretation of the terms change?</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span><span class="op">$</span><span class="va">pet</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/contrast_code.html">contrast_code</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span>, base <span class="op">=</span> <span class="st">"dog"</span><span class="op">)</span>
<span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">pet</span>, <span class="va">df</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/stats/contrasts.html">contrasts</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span><span class="op">)</span>
<span class="co">#&gt;        _cat.vs.dog _ferret.vs.dog</span>
<span class="co">#&gt; cat          0.667         -0.333</span>
<span class="co">#&gt; dog         -0.333         -0.333</span>
<span class="co">#&gt; ferret      -0.333          0.667</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">5</td>
<td align="right">0.062</td>
<td align="right">80.2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">pet_cat.vs.dog</td>
<td align="right">-2</td>
<td align="right">0.173</td>
<td align="right">-11.5</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">pet_ferret.vs.dog</td>
<td align="right">5</td>
<td align="right">0.122</td>
<td align="right">40.8</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>Contrast coding with the third level (“ferret”) as the base.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span><span class="op">$</span><span class="va">pet</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/contrast_code.html">contrast_code</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span>, base <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">pet</span>, <span class="va">df</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/stats/contrasts.html">contrasts</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span><span class="op">)</span>
<span class="co">#&gt;        _cat.vs.ferret _dog.vs.ferret</span>
<span class="co">#&gt; cat             0.667         -0.333</span>
<span class="co">#&gt; dog            -0.333          0.667</span>
<span class="co">#&gt; ferret         -0.333         -0.333</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">5</td>
<td align="right">0.062</td>
<td align="right">80.2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">pet_cat.vs.ferret</td>
<td align="right">-7</td>
<td align="right">0.158</td>
<td align="right">-44.3</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">pet_dog.vs.ferret</td>
<td align="right">-5</td>
<td align="right">0.122</td>
<td align="right">-40.8</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
</div>
<div id="sum-coding" class="section level2">
<h2 class="hasAnchor">
<a href="#sum-coding" class="anchor"></a>Sum Coding</h2>
<p>Sum coding also sets the grand mean as the intercept. Each contrast compares one level with the grand mean. Therefore, the estimate for <code>pet_cat.vs.intercept</code> is the difference between the mean value for cats and the grand mean (<span class="math inline">\(2 - 5\)</span>).</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span><span class="op">$</span><span class="va">pet</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sum_code.html">sum_code</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span><span class="op">)</span>
<span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">pet</span>, <span class="va">df</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/stats/contrasts.html">contrasts</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span><span class="op">)</span>
<span class="co">#&gt;        _cat.vs.intercept _dog.vs.intercept</span>
<span class="co">#&gt; cat                    1                 0</span>
<span class="co">#&gt; dog                    0                 1</span>
<span class="co">#&gt; ferret                -1                -1</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">5</td>
<td align="right">0.062</td>
<td align="right">80.2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">pet_cat.vs.intercept</td>
<td align="right">-3</td>
<td align="right">0.103</td>
<td align="right">-29.2</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">pet_dog.vs.intercept</td>
<td align="right">-1</td>
<td align="right">0.085</td>
<td align="right">-11.8</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>You can’t compare all levels with the grand mean, and have to omit one level. This is the last level by default, but you can change it with the <code>omit</code> argument.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span><span class="op">$</span><span class="va">pet</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sum_code.html">sum_code</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span>, omit <span class="op">=</span> <span class="st">"dog"</span><span class="op">)</span>
<span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">pet</span>, <span class="va">df</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/stats/contrasts.html">contrasts</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span><span class="op">)</span>
<span class="co">#&gt;        _cat.vs.intercept _ferret.vs.intercept</span>
<span class="co">#&gt; cat                    1                    0</span>
<span class="co">#&gt; dog                   -1                   -1</span>
<span class="co">#&gt; ferret                 0                    1</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">5</td>
<td align="right">0.062</td>
<td align="right">80.2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">pet_cat.vs.intercept</td>
<td align="right">-3</td>
<td align="right">0.103</td>
<td align="right">-29.2</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">pet_ferret.vs.intercept</td>
<td align="right">4</td>
<td align="right">0.075</td>
<td align="right">53.7</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>Omit the first level (“cat”).</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span><span class="op">$</span><span class="va">pet</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sum_code.html">sum_code</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span>, omit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">pet</span>, <span class="va">df</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/stats/contrasts.html">contrasts</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span><span class="op">)</span>
<span class="co">#&gt;        _dog.vs.intercept _ferret.vs.intercept</span>
<span class="co">#&gt; cat                    0                    1</span>
<span class="co">#&gt; dog                   -1                   -1</span>
<span class="co">#&gt; ferret                 1                    0</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">5</td>
<td align="right">0.062</td>
<td align="right">80.2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">pet_dog.vs.intercept</td>
<td align="right">4</td>
<td align="right">0.075</td>
<td align="right">53.7</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">pet_ferret.vs.intercept</td>
<td align="right">-3</td>
<td align="right">0.103</td>
<td align="right">-29.2</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
</div>
<div id="treatment-coding" class="section level2">
<h2 class="hasAnchor">
<a href="#treatment-coding" class="anchor"></a>Treatment Coding</h2>
<p>Treatment coding sets the mean of the reference group as the intercept. This is the same type of coding as the default for factors (unless you change your default using <code><a href="https://rdrr.io/r/base/options.html">options()</a></code>) but with clearer term labels.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span><span class="op">$</span><span class="va">pet</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/treatment_code.html">treatment_code</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span><span class="op">)</span>
<span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">pet</span>, <span class="va">df</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/stats/contrasts.html">contrasts</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span><span class="op">)</span>
<span class="co">#&gt;        _dog.vs.cat _ferret.vs.cat</span>
<span class="co">#&gt; cat              0              0</span>
<span class="co">#&gt; dog              1              0</span>
<span class="co">#&gt; ferret           0              1</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">2</td>
<td align="right">0.141</td>
<td align="right">14.1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">pet_dog.vs.cat</td>
<td align="right">2</td>
<td align="right">0.173</td>
<td align="right">11.5</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">pet_ferret.vs.cat</td>
<td align="right">7</td>
<td align="right">0.158</td>
<td align="right">44.3</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>Each contrast compares one level with the reference level, which defaults to the first level, but you can set with the <code>base</code> argument. Now the intercept estimates the mean value for dogs (<span class="math inline">\(4\)</span>).</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span><span class="op">$</span><span class="va">pet</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/treatment_code.html">treatment_code</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span>, base <span class="op">=</span> <span class="st">"dog"</span><span class="op">)</span>
<span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">pet</span>, <span class="va">df</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/stats/contrasts.html">contrasts</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span><span class="op">)</span>
<span class="co">#&gt;        _cat.vs.dog _ferret.vs.dog</span>
<span class="co">#&gt; cat              1              0</span>
<span class="co">#&gt; dog              0              0</span>
<span class="co">#&gt; ferret           0              1</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">4</td>
<td align="right">0.100</td>
<td align="right">40.0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">pet_cat.vs.dog</td>
<td align="right">-2</td>
<td align="right">0.173</td>
<td align="right">-11.5</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">pet_ferret.vs.dog</td>
<td align="right">5</td>
<td align="right">0.122</td>
<td align="right">40.8</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>Set the reference level to the third level (“ferret”).</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span><span class="op">$</span><span class="va">pet</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/treatment_code.html">treatment_code</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span>, base <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">pet</span>, <span class="va">df</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/stats/contrasts.html">contrasts</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span><span class="op">)</span>
<span class="co">#&gt;        _cat.vs.ferret _dog.vs.ferret</span>
<span class="co">#&gt; cat                 1              0</span>
<span class="co">#&gt; dog                 0              1</span>
<span class="co">#&gt; ferret              0              0</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">9</td>
<td align="right">0.071</td>
<td align="right">127.3</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">pet_cat.vs.ferret</td>
<td align="right">-7</td>
<td align="right">0.158</td>
<td align="right">-44.3</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">pet_dog.vs.ferret</td>
<td align="right">-5</td>
<td align="right">0.122</td>
<td align="right">-40.8</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
</div>
<div id="helmert-coding" class="section level2">
<h2 class="hasAnchor">
<a href="#helmert-coding" class="anchor"></a>Helmert Coding</h2>
<p>Helmert coding sets the grand mean as the intercept. Each contrast compares one level with the mean of previous levels. This coding is somewhat different than the results from <code><a href="https://rdrr.io/r/stats/contrast.html">stats::contr.helmert()</a></code> to make it easier to interpret the estimates. This, <code>pet_ferret.vs.cat.dog</code> is the mean value for ferrets minus the mean value for cats and dogs averaged together (<span class="math inline">\(9-(2+4)/2\)</span>).</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span><span class="op">$</span><span class="va">pet</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/helmert_code.html">helmert_code</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span><span class="op">)</span>
<span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">pet</span>, <span class="va">df</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/stats/contrasts.html">contrasts</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span><span class="op">)</span>
<span class="co">#&gt;        _dog.vs.cat _ferret.vs.cat.dog</span>
<span class="co">#&gt; cat           -0.5             -0.333</span>
<span class="co">#&gt; dog            0.5             -0.333</span>
<span class="co">#&gt; ferret         0.0              0.667</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">5</td>
<td align="right">0.062</td>
<td align="right">80.2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">pet_dog.vs.cat</td>
<td align="right">2</td>
<td align="right">0.173</td>
<td align="right">11.5</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">pet_ferret.vs.cat.dog</td>
<td align="right">6</td>
<td align="right">0.112</td>
<td align="right">53.7</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>You can change the comparisons by reordering the levels.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span><span class="op">$</span><span class="va">pet</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/helmert_code.html">helmert_code</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"ferret"</span>, <span class="st">"dog"</span>, <span class="st">"cat"</span><span class="op">)</span><span class="op">)</span>
<span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">pet</span>, <span class="va">df</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/stats/contrasts.html">contrasts</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">pet</span><span class="op">)</span>
<span class="co">#&gt;        _dog.vs.ferret _cat.vs.ferret.dog</span>
<span class="co">#&gt; ferret           -0.5             -0.333</span>
<span class="co">#&gt; dog               0.5             -0.333</span>
<span class="co">#&gt; cat               0.0              0.667</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">5.0</td>
<td align="right">0.062</td>
<td align="right">80.2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">pet_dog.vs.ferret</td>
<td align="right">-5.0</td>
<td align="right">0.122</td>
<td align="right">-40.8</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">pet_cat.vs.ferret.dog</td>
<td align="right">-4.5</td>
<td align="right">0.154</td>
<td align="right">-29.2</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Lisa DeBruine.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
